# í‘¸ëŒ•(pooDaeng)

> í‘¸ëŒ•ì€ ì„œìš¸ì‹œì˜ ë°˜ë ¤ê²¬ ë°°ë³€ ì‹œì„¤ ìœ„ì¹˜ì™€ ê¸¸ ì•ˆë‚´, ë°˜ë ¤ê²¬ì˜ ì‹¤ì¢… ìœ„ì¹˜ì™€ ì‚¬ìš©ìë“¤ì˜ ì œë³´ë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

<div style="display: flex">
<img src="https://i.ibb.co/pr223TM/pooDaeng.png">
</div>
<br>



## âš™ï¸ BE Tech Stack

<div style="display: flex">
  <img src="https://img.shields.io/badge/Javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=fff"/>
  <img src="https://img.shields.io/badge/Node.js-339933?style=for-the-badge&logo=nodedotjs&logoColor=fff"/>
  <img src="https://img.shields.io/badge/Mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=fff"/>
  <img src="https://img.shields.io/badge/Npm-CB3837?style=for-the-badge&logo=npm&logoColor=fff"/>
  <img src="https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white"/>
  <img src="https://img.shields.io/badge/Kakao_Map-FFCD00?style=for-the-badge&logo=kakao&logoColor=black"/>
  <img src="https://img.shields.io/badge/TMap-000000?style=for-the-badge&logo=sktelecom&logoColor=white"/>
  <img src="https://img.shields.io/badge/Amazon_EC2-232F3E?style=for-the-badge&logo=amazonaws&logoColor=white"/>
  <img src="https://img.shields.io/badge/Amazon_RDS-007BFF?style=for-the-badge&logo=amazon-rds&logoColor=white"/>
  <img src="https://img.shields.io/badge/Sentry-362D59?style=for-the-badge&logo=sentry&logoColor=white"/>
  <img src="https://img.shields.io/badge/AWS_CodeDeploy-232F3E?style=for-the-badge&logo=amazonaws&logoColor=white"/>
  <img src="https://img.shields.io/badge/GitHub_Actions-2088FF?style=for-the-badge&logo=githubactions&logoColor=white"/>

</div>

<br>



## ğŸ“’ í‘¸ëŒ• S.A ë³´ëŸ¬ê°€ê¸°

![í‘¸ëŒ• S.A](https://github.com/hanghae-99-real-project/back-end/assets/125964794/e5472469-3da5-4f58-b913-40a43de77010)
[í‘¸ëŒ• S.A](https://www.notion.so/Poo-Daeng-b6a9dfbab28e4295b889bf0040ff1b21)

<br>



## ë””ìì¸

![í‘¸ëŒ• S.A](https://github.com/hanghae-99-real-project/back-end/assets/125964794/e5472469-3da5-4f58-b913-40a43de77010)
[í‘¸ëŒ• ë””ìì¸](https://www.figma.com/file/pBnEtEMaoNtBYKXftbYfKW/%ED%91%B8%EB%8C%95-%EB%94%94%EC%9E%90%EC%9D%B8?type=design&node-id=0-1&mode=design&t=Ik37bQY8HltMvWNF-0)

<br>



## ğŸ›  Project Architecture

![KakaoTalk_20230622_174339706](https://github.com/hanghae-99-real-project/back-end/assets/125964794/c8d5c614-ae6f-4c1d-9e09-1b1ff691802f)

<br>



## âœ¨ í”„ë¡œì íŠ¸ ê¸°ëŠ¥ ì •ë¦¬

1. íšŒì›ê°€ì…: ìœ ì € ìœ„ì¹˜ ë™ì˜, ì´ë¯¸ì§€ ì—…ë¡œë“œ, íœ´ëŒ€í° ë²ˆí˜¸ ì¸ì¦

2. ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ: Access-tokenê³¼ Refresh-tokenì„ ì‚¬ìš©í•œ ë¡œê·¸ì¸ ì¸ì¦, ì†Œì…œ ë¡œê·¸ì¸(ì¹´ì¹´ì˜¤)

3. ë©”ì¸í™”ë©´: í‘¸ë°•ìŠ¤ ì¡°íšŒ, ëŒ•íŒŒì¸ë” ì¡°íšŒ(ë¡œê·¸ì¸ í•œ ìœ ì € ì¤‘ ìœ„ì¹˜ì •ë³´ ë™ì˜í•œ ìœ ì €ëŠ” ë°˜ê²½ 5km ë‚´ì™¸ì˜ ëŒ•íŒŒì¸ë” 10ê°œ ì¡°íšŒ, ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ìœ ì €ì™€ ë¡œê·¸ì¸ í•œ ìœ ì € ì¤‘ ìœ„ì¹˜ì •ë³´ ë™ì˜í•˜ì§€ ì•Šì€ ìœ ì €ëŠ” ëŒ•íŒŒì¸ë” 10ê°œ ëœë¤ ì¡°íšŒ)

4. ë§ˆì´í˜ì´ì§€: ì¡°íšŒ, í”„ë¡œí•„ ìˆ˜ì •(nickname & password), ìœ ì €ê°€ ì‘ì„±í•œ ê¸€ ì¡°íšŒ, ìœ ì €ê°€ ë“±ë¡í•œ í‘¸ë°•ìŠ¤ ì¡°íšŒ, ìœ ì €ê°€ ë“±ë¡í•œ ë¶ë§ˆí¬ ì¡°íšŒ

5. í‘¸ë°•ìŠ¤: ë“±ë¡(30m ë‚´ì™¸ì— ë“±ë¡í•œ í‘¸ë°•ìŠ¤ê°€ ìˆìœ¼ë©´ í‘¸ë°•ìŠ¤ ë“±ë¡ X (ì¤‘ë³µ ë“±ë¡ ë§‰ê¸° ìœ„í•´ì„œ)), ì¡°íšŒ(KAKAO API ì§€ë„, í‘¸ë°•ìŠ¤ ì •ë³´, í‘¸ë°•ìŠ¤ ìƒì„¸ ì •ë³´), í‘¸ë°•ìŠ¤ ì‹ ê³ (5íšŒ ì‹ ê³  ì‹œ í‘¸ë°•ìŠ¤ ìë™ ì‚­ì œ)

6. í‘¸ë°•ìŠ¤ ë„¤ë¹„ê²Œì´ì…˜: ë“±ë¡ëœ í‘¸ë°•ìŠ¤ë¡œ ê°€ëŠ” ìµœë‹¨ ë£¨íŠ¸ ê¸¸ì°¾ê¸°(ì£¼ì†Œ, ìµœì†Œ ì‹œê°„, geolocation, TMAP API)

7. ëŒ•íŒŒì¸ë” ê²Œì‹œê¸€: ë°˜ë ¤ê²¬ ì‹¤ì¢… ì‹ ê³  ì‘ì„±, ë°˜ë ¤ê²¬ ì‹¤ì¢… ì‹ ê³  ìµœì‹ ìˆœìœ¼ë¡œ ì¡°íšŒ, ë°˜ë ¤ê²¬ ì‹¤ì¢… ì‹ ê³  ìœ ì € í˜„ìœ„ì¹˜ì—ì„œ ê°€ê¹Œìš´ ìˆœìœ¼ë¡œ ì¡°íšŒ, ë°˜ë ¤ê²¬ ì‹¤ì¢… ì‹ ê³  ì¡°íšŒ(ì°¾ì•˜ì–´ìš”), ë°˜ë ¤ê²¬ ì‹¤ì¢… ì‹ ê³  ìƒì„¸ ì¡°íšŒ, ë°˜ë ¤ê²¬ ì‹¤ì¢… ì‹ ê³  ìˆ˜ì •, ë°˜ë ¤ê²¬ ì‹¤ì¢… ì‹ ê³  ì‚­ì œ, ë°˜ë ¤ê²¬ ì‹¤ì¢… ì‹ ê³  ë¶ë§ˆí¬(ë“±ë¡, ì‚­ì œ), ê²€ìƒ‰, í˜ì´ì§€ë„¤ì´ì…˜

8. ëŒ“ê¸€, ë¹„ë°€ ëŒ“ê¸€: ì‘ì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ

9. ëŒ€ëŒ“ê¸€, ë¹„ë°€ ëŒ€ëŒ“ê¸€: ì‘ì„±, ì¡°íšŒ, ì‚­ì œ

<!-- 9. ì•Œë¦¼: ìƒì„±(ëŒ“ê¸€, ëŒ€ëŒ“ê¸€), ì¡°íšŒ, ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬ -->

<br>



## âš™ï¸ ERD

<div style="display: flex">
<img src="https://i.ibb.co/Dp3wVSg/poo-Daeng-ERD.png">
</div>

<br>



## BE íŒ€ì›

| Role | GitHub                                                |
| ---- | ----------------------------------------------------- |
| BE   | [ParkBrianJunSoo](https://github.com/ParkBrianJunSoo) |
| BE   | [ê¹€ìš©ì‹](https://github.com/ystar5008)                |
| BE   | [ì¡°ìš°ìƒ](https://github.com/juster0706)               |

<br>



## ğŸ› ï¸ BE íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ğŸ› ï¸

### 1. í‘¸ë°•ìŠ¤ post ìš”ì²­ì‹œ ì•„ë˜ ì—ëŸ¬ ì½”ë“œê°€ ì‘ë‹µìœ¼ë¡œ ë°˜í™˜
```bash
500 Internal Server Error
```
#### ì²˜ìŒ ìƒê°í•œ ì—ëŸ¬ ì´ìœ 

- ì²˜ìŒ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ í†µì‹ í•˜ëŠ” í…ŒìŠ¤íŠ¸ì˜€ê¸°ë•Œë¬¸ì— ë‹¹ì—°í•˜ê²Œë„ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ëŠ” í˜•ì‹ì— ë¬¸ì œê°€ ìˆì„ê±°ë¼ê³  ìƒê°í•˜ì—¬ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì˜ ë°ì´í„° ì†¡ìˆ˜ì‹  ë¶€ë¶„ ì½”ë“œë¥¼ í™•ì¸í–ˆê³  , í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì—ì„œ ì˜ëª»ëœ keyë¡œ ë°ì´í„°ë¥¼ ë„˜ê²¨ì£¼ëŠ”ê²ƒ í™•ì¸ , ìˆ˜ì • í›„ ì¬ìš”ì²­

#####ìˆ˜ì •í›„ post ìš”ì²­ì‹œ í† í° ê²€ì¦ ë¯¸ë“¤ì›¨ì–´ ì—ì„œ ì„¤ì •í•œ 419 ì—ëŸ¬ ë°œìƒ
```javacript
if (!isRefreshTokenValidate) {
            return res.status(419).json({ errorMessage: "Refresh Tokenì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤." });
        }
```
#### ì˜ì‹¬ëœ ë¶€ë¶„
- ë°ì´í„° í˜•ì‹ì€ ì •ìƒì ìœ¼ë¡œ ì „ë‹¬ì´ ë˜ì—ˆìœ¼ë‚˜ ê·¸ ì‚¬ì‹¤ì„ ì•Œì§€ ëª»í•˜ê³  ê³„ì†í•´ì„œ ë°ì´í„° í˜•ì‹ê³¼ ê²½ë¡œì— ë¬¸ì œê°€ ìˆë‹¤ê³  ìƒê°í•˜ì—¬ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°ì ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ëŠ” ì½”ë“œë¥¼ ê³„ì†í•´ì„œ ìˆ˜ì •í•˜ê³  í…ŒìŠ¤íŠ¸í•¨

#### ë¬¸ì œëœ ë¶€ë¶„
- í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ `accesstoken`ê³¼ `refreshtoken`ì„ ë³´ë‚´ì£¼ëŠ” í˜•ì‹ì´ ë§ì§€ ì•Šì•„ ì„œë²„ì—ì„œ í† í°ì„ ì œëŒ€ë¡œ ë°›ì§€ ëª»í•˜ëŠ” ë¬¸ì œ
- í´ë¼ì´ì–¸íŠ¸ì—ëŠ” `refreshtoken`ì— `bearer` íƒ€ì…ì„ ëª…ì‹œí•˜ì§€ì•Šê³  ì „ì†¡í•¨
- ì„œë²„ì—ì„œëŠ” `refreshtoken`ì— `bearer`íƒ€ì…ê³¼ í† í°ì„ êµ¬ì¡°ë¶„í•´ í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í–ˆìŒ

```javascript
res.cookie("accesstoken", Bearer ${accessToken});
res.cookie("refreshtoken", Bearer ${refreshToken});
```

#### í•´ê²°ë°©ë²•
- ë¼ì´ì–¸íŠ¸ì—ì„œ í† í° ì „ì†¡ì‹œ `bearer` íƒ€ì…ì„ ì œì™¸í•˜ê³  ì „ì†¡
- ì„œë²„ì—ì„œë„ `accesstoken` ë§Œ `bearer` íƒ€ì…ì„ ì‘ì„±í•˜ê³  `refreshtoken`ì—ëŠ” íƒ€ì…ì„ ì‘ì„±í•˜ì§€ ì•ŠìŒ

```javascript
res.cookie("accesstoken", Bearer ${accessToken});
res.cookie("refreshtoken", ${refreshToken});
```



### 2. ëŒ“ê¸€, ëŒ€ëŒ“ê¸€, ë¹„ë°€ ëŒ“ê¸€, ë¹„ë°€ ëŒ€ëŒ“ê¸€ ì¡°íšŒ ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ìœ ì € ì„¤ì •
- ë¹„ë°€ ëŒ“ê¸€ì€ ë¡œê·¸ì¸ í•œ ìœ ì €ë§Œ ë³¼ ìˆ˜ ìˆë‹¤.
- ì¼ë°˜ ëŒ“ê¸€ì€ ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì€ ìœ ì €ë„ ë³¼ ìˆ˜ ìˆë‹¤.
- ë¹„ë°€ ëŒ€ëŒ“ê¸€ì€ ë¡œê·¸ì¸ í•œ ìœ ì €ë§Œ ë³¼ ìˆ˜ ìˆë‹¤.
- ì¼ë°˜ ëŒ€ëŒ“ê¸€ì€ ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì€ ìœ ì €ë„ ë³¼ ìˆ˜ ìˆë‹¤.
`{userId}= res.locals.user`ìœ¼ë¡œ í•˜ë©´ ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì€ ìœ ì €ëŠ” ì•„ë¬´ê²ƒë„ ë³¼ ìˆ˜ ì—†ê¸°ì— `authmiddleware`ì—ì„œ ê°€ì§œ ì‚¬ìš©ì ê°ì²´ë¥¼ ì¶”ê°€ í•´ì£¼ì—ˆë‹¤.

```javascript
// refreshtokenì´ ì—†ê±°ë‚˜ accesstokenì˜ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•Šì„ ë•Œ
if ((!refreshtoken) || (authAccessType !== "Bearer" || !authAccessToken)) {
   // ë¡œì»¬ì— ì‚¬ìš©ì ì •ë³´ë¥¼ nullë¡œ ì„¤ì • // ê°€ì§œ ì‚¬ìš©ì ê°ì²´ë¥¼ ë§Œë“¬
   res.locals.user = { userId: null };
   // ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¡œ ì§„í–‰
   return next();
}
```
```javascript
const { userId } = res.locals.user
```
ì´ ë¶€ë¶„ì„ ë°‘ê³¼ ê°™ì´ ë°”ê¿ˆ
```javascript
// ë¡œê·¸ì¸ì„ í–ˆì„ ë•Œì™€ ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì•˜ì„ ë•Œì˜ ì‚¬ìš©ì êµ¬ë¶„
const userId = res.locals.user ? res.locals.user.userId : null; 
```
- `user` ê°ì²´ê°€ `res.locals`ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
- `? res.locals.user.userId : null;` ë§Œì•½ `res.locals.user`ê°€ ì¡´ì¬í•˜ë©´ `true`, `res.locals.user.userId`ê°€ `userId` ë³€ìˆ˜ì— í• ë‹¹
- `? res.locals.user.userId : null;` ë§Œì•½ `res.locals.user`ê°€ ì¡´ì¬í•˜ë©´ `false`, 
`null`ì´ `userId` ë³€ìˆ˜ì— í• ë‹¹

ì´ë ‡ê²Œ ë°”ê¿”ì„œ ë¡œê·¸ì¸ì„ í•œ ìœ ì €ëŠ” ëŒ“ê¸€, ë¹„ë°€ ëŒ“ê¸€, ëŒ€ëŒ“ê¸€, ë¹„ë°€ ëŒ€ëŒ“ê¸€ì„ ì¡°íšŒí•  ìˆ˜ ìˆê³ , 
ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì€ ìœ ì €ëŠ” ëŒ“ê¸€, ëŒ€ëŒ“ê¸€ë§Œ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ê²Œ ë” ì„¤ì •ì„ í•´ ë‘ì—ˆë‹¤.

1. ì¼ë°˜ ëŒ“ê¸€ ì‘ì„± - ë¡œê·¸ì¸í•œ ìœ ì €ëŠ” ê²Œì‹œë¬¼ì— ì¼ë°˜ ëŒ“ê¸€ì„ ì‘ì„± ê°€ëŠ¥
    ì¼ë°˜ ëŒ“ê¸€ ì¡°íšŒ - ì¼ë°˜ ëŒ“ê¸€ì€ ëª¨ë“  ìœ ì €ê°€ ì¡°íšŒ ê°€ëŠ¥. ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ìœ ì €ë„ ì¡°íšŒ ê°€ëŠ¥
2. ì¼ë°˜ ëŒ“ê¸€ì— ì¼ë°˜ ëŒ€ëŒ“ê¸€ ì‘ì„± - ë¡œê·¸ì¸í•œ ìœ ì €ëŠ” ì¼ë°˜ ëŒ“ê¸€ì— ì¼ë°˜ ëŒ€ëŒ“ê¸€ ì‘ì„± ê°€ëŠ¥
    ì¼ë°˜ ëŒ“ê¸€ì— ì¼ë°˜ ëŒ€ëŒ“ê¸€ ì¡°íšŒ - ì¼ë°˜ ëŒ€ëŒ“ê¸€ì€ ëª¨ë“  ìœ ì €ê°€ ì¡°íšŒ ê°€ëŠ¥. ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ìœ ì €ë„ ì¡°íšŒ ê°€ëŠ¥
3. ì¼ë°˜ ëŒ“ê¸€ì— ë¹„ë°€ ëŒ€ëŒ“ê¸€ ì‘ì„± - ë¡œê·¸ì¸í•œ ìœ ì €ëŠ” ì¼ë°˜ ëŒ“ê¸€ì— ë¹„ë°€ ëŒ€ëŒ“ê¸€ ì‘ì„± ê°€ëŠ¥
    ì¼ë°˜ ëŒ“ê¸€ì— ë¹„ë°€ ëŒ€ëŒ“ê¸€ ì¡°íšŒ - ë¹„ë°€ ëŒ€ëŒ“ê¸€ ì‘ì„±ìì™€ ìƒìœ„ ëŒ“ê¸€ ì‘ì„±ìë§Œ ì¡°íšŒ ê°€ëŠ¥ -- OR -- ë¹„ë°€ ëŒ€ëŒ“ê¸€ ì‘ì„±ì, ìƒìœ„ ëŒ“ê¸€ ì‘ì„±ì, ê²Œì‹œë¬¼ ì‘ì„±ìë„ ì¡°íšŒ ë˜ê²Œë” ê°€ëŠ¥ -- ë‘˜ ì¤‘ í›„ì ì„ íƒ
4. ë¹„ë°€ ëŒ“ê¸€ ì‘ì„± - ë¡œê·¸ì¸í•œ ìœ ì €ëŠ” ê²Œì‹œë¬¼ì— ë¹„ë°€ ëŒ“ê¸€ì„ ì‘ì„± ê°€ëŠ¥
    ë¹„ë°€ ëŒ“ê¸€ ì¡°íšŒ - ë¹„ë°€ ëŒ“ê¸€ ì‘ì„±ìì™€ ê²Œì‹œë¬¼ ì‘ì„±ìë§Œ ì¡°íšŒ ê°€ëŠ¥
5. ë¹„ë°€ ëŒ“ê¸€ì— ì¼ë°˜ ëŒ€ëŒ“ê¸€ ì‘ì„± - ë¶ˆê°€ëŠ¥í•˜ë„ë¡ ì„¤ì • 
    ë¹„ë°€ ëŒ“ê¸€ì— ì¼ë°˜ ëŒ€ëŒ“ê¸€ ì¡°íšŒ - ë¶ˆê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •. ë¹„ë°€ ëŒ“ê¸€ì—ëŠ” ë¹„ë°€ ëŒ€ëŒ“ê¸€ë§Œ ì‘ì„± ê°€ëŠ¥
6. ë¹„ë°€ ëŒ“ê¸€ì— ë¹„ë°€ ëŒ€ëŒ“ê¸€ ì‘ì„± - ê²Œì‹œë¬¼ ì‘ì„±ìì™€ ë¹„ë°€ ëŒ“ê¸€ ì‘ì„±ìë§Œ ë¹„ë°€ ëŒ“ê¸€ì— ë¹„ë°€ ëŒ€ëŒ“ê¸€ ì‘ì„± ê°€ëŠ¥
    ë¹„ë°€ ëŒ“ê¸€ì— ë¹„ë°€ ëŒ€ëŒ“ê¸€ ì¡°íšŒ - ê²Œì‹œë¬¼ ì‘ì„±ìì™€ ë¹„ë°€ ëŒ“ê¸€ ì‘ì„±ìë§Œ ë¹„ë°€ ëŒ€ëŒ“ê¸€ ì¡°íšŒ ê°€ëŠ¥



### 3. Error Handler ì‹¤íŒ¨
```javascript
// ./middlewares/error-handler.js
module.exports = async (error, req, res, next) => {
  // 400ë²ˆ ì—ëŸ¬ëŠ” ì—¬ê¸°ì„œ í•œêº¼ë²ˆì— ì²˜ë¦¬
  if (!error.message) {
    error.message = `400/${error.failedApi}ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.`;
  }

  const [status, errorMessage] = error.message.split("/");
  console.error(error);
  // statusë¥¼ ë„˜ë²„ë¡œ í˜•ë³€í™˜
  return res.status(status).json({ errorMessage });
};
try {

} catch (error) {
  error.failedApi = "ì•Œë¦¼ ì½ìŒ or ì•ˆì½ìŒ"
  throw error;
}
```
ì´ëŸ°ì‹ìœ¼ë¡œ `error`ì„ `throw`ë¥¼ í•´ì£¼ë©´ `error handler`ì´ ì‘ë™í•˜ì§€ ì•ŠëŠ”ë‹¤.

#### ì‹œë„
`app.js`ì— `app.use(errorHandler)`ì„ ì œì¼ ë§ˆì§€ë§‰ì— ìˆë˜ ê²ƒì„ ì‚´ì§ ìœ„ë¡œë„ ì˜¬ë ¤ë³´ì•˜ê³  ë‹¤ë¥¸ íŒŒì¼ë“¤ë„ í™•ì¸í•´ë³´ì•˜ë‹¤.

#### í•´ê²°
```javascript
try {
} catch (error) {
  error.failedApi = "ì•Œë¦¼ ì½ìŒ or ì•ˆì½ìŒ"
  next(error);
}
```
ë¹„ë™ê¸° í•¨ìˆ˜ì—ì„œ `throw` ë¬¸ì„ ì‚¬ìš©í•˜ë©´ ì˜ˆì™¸ëŠ” í•´ë‹¹ í•¨ìˆ˜ì—ì„œ ì¦‰ì‹œ ì¡íˆì§€ ì•Šê³ , í”„ë¡œë¯¸ìŠ¤ ì²´ì¸ì— ì „íŒŒëœë‹¤.
`throw` ë¬¸ì€ ë¹„ë™ê¸° í•¨ìˆ˜ì—ì„œ ì—ëŸ¬ë¥¼ ë˜ì§€ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
ë¯¸ë“¤ì›¨ì–´ì™€ ë¼ìš°í„°ëŠ” í•­ìƒ `next` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ì—ëŸ¬ë¥¼ ì „ë‹¬í•¨. `throw error`ë¥¼ ì‚¬ìš©í•˜ë©´ ì—ëŸ¬ê°€ `error-handler`ì— ì „ë‹¬ë˜ì§€ ì•ŠëŠ”ë‹¤.
ë¹„ë™ê¸° í•¨ìˆ˜ì—ì„œëŠ” í•­ìƒ `next(error)` ì‚¬ìš©í•´ì•¼ í•œë‹¤.
`throwÂ newÂ Error("403/í•´ë‹¹Â ì•Œë¦¼ì„Â í™•ì¸í• Â ìˆ˜Â ì—†ìŠµë‹ˆë‹¤.");`
ì´ë¶€ë¶„ì€ ë˜ëŠ” ì´ìœ ëŠ” `try catch` ë¬¸ ë‚´ì—ì„œ `throw`ë¬¸ì„ ì‚¬ìš©í•˜ë©´, `catch` ë¬¸ì´ ì´ ì—ëŸ¬ë¥¼ ì¡ê³  `next`ë¡œ ì—ëŸ¬í•¸ë“¤ëŸ¬ì— ë˜ì ¸ì¤„ ìˆ˜ ìˆë‹¤.`

#### ëª°ëë˜ ë¶€ë¶„
`app.js`ì— `require("express-async-errors");` ì´ë¶€ë¶„ì„ ì¶”ê°€í•´ì£¼ë©´ `throw error`ì„ ì¨ë„ `app.js`ë¥¼ ê±°ì³ ì—ëŸ¬í•¸ë“¤ëŸ¬í•´ ë˜ì ¸ì¤€ë‹¤.
`express-async-errors`ë¼ëŠ” ëª¨ë“ˆì„ ê°€ì ¸ì˜¤ëŠ” `Node.js` ë¬¸ì´ë‹¤.
ì´ ëª¨ë“ˆì´ ì—†ìœ¼ë©´ ë¹„ë™ê¸° ê²½ë¡œ ë° ë¯¸ë“¤ì›¨ì–´ ë‚´ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ê°€ ì²˜ë¦¬ë˜ì§€ ì•Šì•„ ì„œë²„ ì¶©ëŒì´ ë°œìƒí•˜ê±°ë‚˜ ì„œë²„ê°€ ë¬´ê¸°í•œ ì¤‘ë‹¨ë  ìˆ˜ ìˆë‹¤. ì´ ëª¨ë“ˆì„ ì‚¬ìš©í•˜ë©´ ë¹„ë™ê¸° í•¨ìˆ˜ì—ì„œ ë°œìƒí•˜ëŠ” ëª¨ë“  ì˜¤ë¥˜ê°€ ë¯¸ë“¤ì›¨ì–´ë¡œ ì „ë‹¬ëœë‹¤.



### 4. ì¡°íšŒ ë¶€ë¶„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ë˜ ì¤‘, ì¡°íšŒ, ìƒì„¸ì¡°íšŒ ë¶€ë¶„ì˜ ë‚ ì§œê°€ ë§ì§€ ì•ŠëŠ”ë‹¤.
```javascript
test('ëŒ•íŒŒì¸ë” ì»¨íŠ¸ë¡¤ëŸ¬ getPostById ë©”ì†Œë“œ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì„±ê³µ ì¼€ì´ìŠ¤', async () => {
        const mockGetPostsData =
        {
            postId: 3,
            UserId: 1,
            nickname: "ì¡°í˜•ë¯¼",
            dogname: "ì–‘ì„±",
            title: 'ì–‘ì„±',
            content: "<p>ì–‘ì„±</p>",
            lostPhotoUrl: [
                "https://karyl.s3.ap-northeast-2.amazonaws.com/folder/2023-6-15-7-40-4_2472548"
            ],
            losttime: null,
            lostLatitude: "37.17342092960466",
            lostLongitude: "128.47409107526380",
            address: "ê°•ì›íŠ¹ë³„ìì¹˜ë„ ì˜ì›”êµ° ì˜ì›”ì ë•í¬ë¦¬ 797",
            views: 16,
            status: false,
            createdAt: new Date().toISOString(),
            updatedAt: new Date().toISOString(),
            BookMarks: []
        };

        const mockRequestParams = {
            postId: 3,
        }

        postController.postControllerService = {
            getPostById: jest.fn(() => mockGetPostsData),
        };

        mockRequest.params = mockRequestParams;

        await postController.getPostById(mockRequest, mockResponse, mockNext);

        expect(mockResponse.status).toHaveBeenCalledTimes(1);
        expect(mockResponse.status).toHaveBeenCalledWith(200);
        expect(mockResponse.json).toHaveBeenCalledWith(mockGetPostsData);
    });
```
ë°‘ ë¶€ë¶„ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‹¤íŒ¨
```bash
â— ëŒ•íŒŒì¸ë” ì»¨íŠ¸ë¡¤ëŸ¬ ìœ ë‹› í…ŒìŠ¤íŠ¸ â€º ëŒ•íŒŒì¸ë” ì»¨íŠ¸ë¡¤ëŸ¬ getPostById ë©”ì†Œë“œ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì„±ê³µ ì¼€ì´ìŠ¤

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

    @@ -1,11 +1,11 @@
      Object {
        "BookMarks": Array [],
        "UserId": 1,
        "address": "ê°•ì›íŠ¹ë³„ìì¹˜ë„ ì˜ì›”êµ° ì˜ì›”ì ë•í¬ë¦¬ 797",
        "content": "<p>ì–‘ì„±</p>",
		-   "createdAt": 2023-06-16T05:54:26.289Z,
    +   "createdAt": 2023-06-15T07:40:04.000Z,
        "dogname": "ì–‘ì„±",
        "lostLatitude": "37.17342092960466",
        "lostLongitude": "128.47409107526380",
        "lostPhotoUrl": Array [
          "https://karyl.s3.ap-northeast-2.amazonaws.com/folder/2023-6-15-7-40-4_2472548",
    @@ -13,8 +13,8 @@
        "losttime": null,
        "nickname": "ì¡°í˜•ë¯¼",
        "postId": 3,
        "status": false,
        "title": "ì–‘ì„±",
		-   "updatedAt": 2023-06-16T05:54:26.289Z,
    +   "updatedAt": 2023-06-16T05:54:26.000Z,
        "views": 7,
      },

    Number of calls: 1

      160 |         expect(mockResponse.status).toHaveBeenCalledTimes(1);
      161 |         expect(mockResponse.status).toHaveBeenCalledWith(200);
    > 162 |         expect(mockResponse.json).toHaveBeenCalledWith(mockGetPostsData);
          |                                   ^
      163 |     });
      164 |
      165 |

      at Object.toHaveBeenCalledWith (test/unit/testcontrollers/posts.controller.unit.spec.js:162:35)
```
ì´ ë¶€ë¶„ì´ ë§ì§€ ì•Šì•„ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì‹¤íŒ¨í•˜ì˜€ë‹¤ê³  ëœ¬ë‹¤. 
```bash
		-   "createdAt": 2023-06-16T05:54:26.289Z,
    +   "createdAt": 2023-06-15T07:40:04.000Z,
		-   "updatedAt": 2023-06-16T05:54:26.289Z,
    +   "updatedAt": 2023-06-16T05:54:26.000Z,
```
ë‚ ì§œì˜ ì‹œê°„ì´ ë§ì§€ ì•ŠëŠ”ë‹¤.

#### ì‹œë„ 
- `new Date()`ë¡œ í–ˆë”ë‹ˆ ë‚ ì§œì™€ ì‹œê°„ì´ ë§ì§€ ì•Šì•„ ì‹¤íŒ¨
- `new Date().toISOString()`ë¡œ í–ˆë”ë‹ˆ ë‚ ì§œì™€ ì‹œê°„ì´ ë§ì§€ ì•Šì„ ë¿ë”ëŸ¬ string ê°’ì´ ë‚˜ì™€ ì‹¤íŒ¨
- `new Date().toISOString()`ì„ ë¹¼ê³  `â€œ2023-06-16T05:54:26.289Zâ€` string ê°’ìœ¼ë¡œ ë„£ì–´ë³´ì•˜ì§€ë§Œ ë‚ ì§œê°€ stringìœ¼ë¡œ ë‚˜ì™€ì„œ Receivedì™€ ë‹¤ë¥´ë‹¤ê³  ì‹¤íŒ¨
- ë°‘ê³¼ ê°™ì€ ë¶€ë¶„ì„ ì¶”ê°€í•˜ì—¬ `updatedAt`ì€ ë°€ë¦¬ ì´ˆ ë‹¨ìœ„ë¡œ ëŠì–´ ë˜‘ê°™ì´ ë§Œë“¤ì–´ ì£¼ì—ˆë‹¤. ì„±ê³µ

```javascript
const dateWithoutMilliseconds = new Date();
dateWithoutMilliseconds.setMilliseconds(0);
const specificDate = new Date('2023-06-15T07:40:04Z');
```
í•˜ì§€ë§Œ `createdAt`ì„ `new Date`ìœ¼ë¡œ ë˜‘ê°™ì´ ë§ì¶°ì¤¬ëŠ”ë° ì‹¤íŒ¨

#### í•´ê²°
ìƒì„±ì„ í•  ë•Œ createdAtì„ ì„ì˜ë¡œ ì§€ì •í•˜ê³  ì¡°íšŒ ë•Œ ì„ì˜ë¡œ ì§€ì •ëœ createdAtê³¼ updatedAtì„ ì¨ì¤€ë‹¤.



### 5. Jestì—ì„œ Module Alias ì¸ì‹ ì‹¤íŒ¨
`module-alias` ëª¨ë“ˆì„ ì„¤ì¹˜í•˜ì—¬ ../ë¥¼ ì‚¬ìš©í•˜ì—¬ í´ë”ë¥¼ ìœ„ë¡œ ì˜¬ë¦´ í•„ìš” ì—†ì´ `@controller, @services,â€¦` ë¡œ ìƒìœ„ í´ë”ë¥¼ ê°–ê³  ì˜¬ ìˆ˜ ìˆë‹¤.
`package.json` ì„¤ì •

```package.json
"_moduleAliases": {
    "@root": ".",
    "@controllers": "controllers",
    "@services": "services",
    "@repositories": "repositories",
    "@models": "models",
    "@middlewares": "middlewares",
    "@modules": "modules"
  },
```

ì´ë ‡ê²Œ `@`ë¡œ ì§€ì •ì„ í•˜ì—¬ ìƒìœ„ í´ë”ë¥¼ ê°–ê³  ì˜¬ ìˆ˜ ìˆëŠ”ë°, `Jest` í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í•˜ë ¤ê³  í•˜ë˜ ì™€ì¤‘
`const PostController = require("@controllers/posts.controller");`ë¥¼ `Jest`ì—ì„œ ì¸ì‹í•  ìˆ˜ ì—†ë‹¤ê³  ë‚˜ì™”ë‹¤.
`Jest`ëŠ”Â `package.json`ì˜Â `_moduleAliases`Â ì„¹ì…˜ì—ì„œ ë³„ì¹­ì„ ìë™ìœ¼ë¡œ ë°”ê¿”ì£¼ì§€ ì•ŠëŠ”ë‹¤.
`Node.js`ëŠ” ëŸ°íƒ€ì„ì„ êµ¬ì„±í•˜ê¸° ë•Œë¬¸ì— `module-alias`ë¥¼ ì“¸ ìˆ˜ ìˆì§€ë§Œ `Jest`ëŠ” ê·¸ë ‡ì§€ ì•Šë‹¤.
ë³€í™˜ í”„ë¡œì„¸ìŠ¤ë¥¼ í†µí•´ `module-alias`ë¥¼ `Jest`ì—ì„œ ì‚¬ìš©í•´ ë³´ì•˜ë‹¤.
ë³€í™˜ í”„ë¡œì„¸ìŠ¤ì¸ `babel-plugin-module-resolver`ë¥¼ ì„¤ì¹˜í•˜ì—¬ Jestë¥¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ëª¨ë“ˆ ê²½ë¡œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í–ˆë‹¤.
`.babelrc` í˜¹ì€ `babel.config.json` íŒŒì¼ì„ ë§Œë“¤ì–´ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ë‹¤.
`package.json` íŒŒì¼ì´ ë³µì¡í•´ì§€ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ë°”ë²¨ íŒŒì¼ì„ ë”°ë¡œ ë§Œë“¤ì—ˆë‹¤.

```javascript
{
  "plugins": [
    [
      "module-resolver",
      {
        "alias": {
          "@root": "./",
          "@controllers": "./controllers",
          "@services": "./services",
          "@repositories": "./repositories",
          "@models": "./models",
          "@middlewares": "./middlewares",
          "@modules": "./modules"
        }
      }
    ]
  ]
}
```

ë°”ë²¨ì„ ì‚¬ìš©í•˜ë„ë¡ `package.json`ì— `Jest`ë¥¼ ì¬êµ¬ì„±ì„ í•´ì£¼ì—ˆë‹¤.

```package.json
"jest": {
  "transform": {
    "^.+\\.jsx?$": "babel-jest"
  },
  "moduleNameMapper": {
    "^@root/(.*)$": "<rootDir>/$1",
    "^@controllers/(.*)$": "<rootDir>/controllers/$1",
    "^@services/(.*)$": "<rootDir>/services/$1",
    "^@repositories/(.*)$": "<rootDir>/repositories/$1",
    "^@models$": "<rootDir>/models",
    "^@middlewares/(.*)$": "<rootDir>/middlewares/$1",
    "^@modules/(.*)$": "<rootDir>/modules/$1"
  }
}
```

ì—¬ê¸°ì„œ ì‚¬ìš©ë˜ëŠ” ê¸°í˜¸ë“¤ì€  `Jest` ì„¤ì •ì— ì‚¬ìš©ë˜ëŠ” JSON êµ¬ë¬¸ì´ë‹¤. ì´ êµ¬ë¬¸ì€ `Jest`ê°€ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•œë‹¤.

```package.json
"transform": {
    "^.+\\.jsx?$": "babel-jest"
  },
```

ì´ë¶€ë¶„ì€ Jestê°€ ëª¨ë“ˆì„ ê°€ì ¸ì˜¤ê¸° ì „ ë³€í™˜í•œë‹¤. 
`babel-jest` ë³€í™˜ê¸°ëŠ” Jestê°€ `ES6+` ë¬¸ë²•ê³¼ `JSX`ë¥¼ ì´í•´í•  ìˆ˜ ìˆê²Œ í•œë‹¤.
ì´ëŠ” `.js` ë˜ëŠ” `.jsx` í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ì ìš©ëœë‹¤.

```package.json
"moduleNameMapper": {
    "^@root/(.*)$": "<rootDir>/$1",
    "^@controllers/(.*)$": "<rootDir>/controllers/$1",
    "^@services/(.*)$": "<rootDir>/services/$1",
    "^@repositories/(.*)$": "<rootDir>/repositories/$1",
    "^@models$": "<rootDir>/models",
    "^@middlewares/(.*)$": "<rootDir>/middlewares/$1",
    "^@modules/(.*)$": "<rootDir>/modules/$1"
  }
```

`moduleNameMapper`ì€ ëª¨ë“ˆ ê²½ë¡œë¥¼ ê°€ìƒì˜ ê²½ë¡œë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.
`<rootDir>`ëŠ” Jestê°€ ì‹¤í–‰ë˜ëŠ” ë””ë ‰í† ë¦¬ì¸ë° `@controllers/post.controller.js`ì˜ í˜•íƒœë¡œ ëª¨ë“ˆì„ ê°€ì ¸ì˜¤ê³  ì‹¶ë‹¤ë©´ ì´ë¥¼ ì‹¤ì œ ê²½ë¡œì¸ `<rootDir>/controllers/post.controller.js`ë¡œ ë§¤í•‘í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.
ì´ë ‡ê²Œ ë°”ë²¨ì„ ì„¤ì¹˜í•˜ì—¬ ì„¤ì •í•´ë‘ë©´ `Jest`ì—ì„œë„ `module-alias`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.



### 6. í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìœ„í•´ DBë¥¼ ë³µì œí•˜ë˜ ì¤‘ ì—ëŸ¬ ë°œìƒ
`DB`ë¥¼ ë³µì œí•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

#### í…ŒìŠ¤íŠ¸ìš© DB ìƒì„±
1. ë¨¼ì € `cmd`ë¥¼ í‚¤ê³  `MySQL` ì¸í„°í˜ì´ìŠ¤ì— ë¡œê·¸ì¸ì„ í•œë‹¤.

```bash
mysql -h [hostname] -u [username] -p
```

1. ë°€ë²ˆí˜¸ ì…ë ¥
2. ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆ ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±

```bash
CREATE DATABASE [database];
```

`;` ê¹Œì§€ ì…ë ¥
ì´ë ‡ê²Œ í•˜ë©´ `DB`ê°€ ìƒì„±ëœ ê±¸ ë³¼ ìˆ˜ ìˆë‹¤.
ì°¸ê³ ë¡œ DBê°€ ìƒì„±ëœ ê²ƒì„ ë³´ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì•¼ í•œë‹¤.

```bash
SHOW DATABASES;
```

#### DB data ë³µì‚¬
1. ì»¤ë©˜ë“œë¥¼ í‚¤ê³  ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•˜ì—¬ `DB` ì•ˆì— ìˆëŠ” ëª¨ë“  `data`ë¥¼ ë³µì‚¬í•œë‹¤.

```bash
mysqldump -h [hostname] -u [username] -p [database] > [output_file]
```

ì˜ˆì‹œ

```bash
mysqldump -h ì–´ì©Œêµ¬ì €ì©Œêµ¬.ì–´ì©Œêµ¬ì €ì©Œêµ¬.amazonaws.com -u ì–´ì©Œêµ¬ì €ì©Œêµ¬ -p ì–´ì©Œêµ¬ì €ì©Œêµ¬ > ì–´ì©Œêµ¬ì €ì©Œêµ¬.sql
```

1. ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
ì–´ì©Œêµ¬ì €ì©Œêµ¬.sql íŒŒì¼ì´ ìƒì„±ëœë‹¤.
ìœˆë„ìš° ì°½ì—ì„œ ê²€ìƒ‰ì„ í•´ë³´ë©´ íŒŒì¼ì´ ìƒì„±ëœê±¸ ë³¼ ìˆ˜ ìˆë‹¤.

#### DB dataÂ ë¶™ì—¬ë„£ê¸°
1. ë³µì‚¬í•œ `data`ë¥¼ ìƒˆë¡œÂ ìƒì„±í•œ í…ŒìŠ¤íŠ¸ìš© `DB`ì— ë¶™ì—¬ë„£ëŠ”ë‹¤.

```bash
mysql -h [hostname] -u [username] -p [new database] < [output_file]
```

1. ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
ì´ë ‡ê²Œ í•˜ë©´ ë³µì‚¬ëœ ë°ì´í„°ê°€ ìƒˆë¡œ ìƒì„±í•œ í…ŒìŠ¤íŠ¸ìš© `DB`ì— ë¶™ì—¬ë„£ì–´ ì ¸ì•¼í•˜ëŠ”ë° ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ëœ¬ë‹¤.

```bash
ë­ì‹œê¸°ì €ì‹œê¸°ì–´ì©Œêµ¬ì €ì©Œêµ¬
Enter password: ********
ERROR 1227 (42000) at line 18: Access denied; you need (at least one of) 
the SUPER, SYSTEM_VARIABLES_ADMIN or SESSION_VARIABLES_ADMIN privilege(s) 
for this operation
```

ì´ ì˜¤ë¥˜ëŠ” ì‚¬ìš© ì¤‘ì¸ `MySQL` ì‚¬ìš©ìì—ê²Œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ íŠ¹ì • ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ ê¶Œí•œì´ ì—†ìŒì„ ë‚˜íƒ€ë‚¸ë‹¤.
18ë²ˆì§¸ ì¤„ì—ì„œ ë§‰íŒë‹¤ê³  ëœ¨ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
1. ìƒì„ ëœ `SQL` íŒŒì¼ì„ ìœˆë„ìš° ì°½ì—ì„œ ê²€ìƒ‰ì„ í•˜ì—¬ íŒŒì¼ì„ ì—´ì–´ì¤€ë‹¤.
2. 18ë²ˆì§¸ ì¤„ì„ ì£¼ì„ì²˜ë¦¬ í•´ì£¼ê³  ìœ„ì— ë¶™ì—¬ë„£ê¸°ë¥¼ ì…ë ¥í–ˆë˜ ë¶€ë¶„ì„ ë‹¤ì‹œ ì…ë ¥í•´ì¤€ë‹¤.

```bash
mysql -h [hostname] -u [username] -p [new database] < [output_file]
```

ê·¸ëŸ¬ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

```bash
ë­ì‹œê¸°ì €ì‹œê¸°ì–´ì©Œêµ¬ì €ì©Œêµ¬
Enter password: ********
ERROR 1227 (42000) at line 24: Access denied; you need (at least one of) 
the SUPER, SYSTEM_VARIABLES_ADMIN or SESSION_VARIABLES_ADMIN privilege(s) 
for this operation
```

1. 24ë²ˆì§¸ ì¤„ì„ ì£¼ì„ì²˜ë¦¬ í•´ì£¼ê³  ë˜ ë˜‘ê°™ì´ ìœ„ì— ë¶™ì—¬ë„£ê¸°ë¥¼ ì…ë ¥í–ˆë˜ ë¶€ë¶„ì„ ë‹¤ì‹œ ì…ë ¥í•´ì¤€ë‹¤.
ê·¸ëŸ¬ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

```bash
ë­ì‹œê¸°ì €ì‹œê¸°ì–´ì©Œêµ¬ì €ì©Œêµ¬
Enter password: ********
ERROR 1227 (42000) at line 352: Access denied; you need (at least one of) 
the SUPER, SYSTEM_VARIABLES_ADMIN or SESSION_VARIABLES_ADMIN privilege(s) 
for this operation
```

1. 352ë²ˆì§¸ ì¤„ì„ ì£¼ì„ì²˜ë¦¬ í•´ì£¼ê³  ë˜ ë˜‘ê°™ì´ ìœ„ì— ë¶™ì—¬ë„£ê¸°ë¥¼ ì…ë ¥í–ˆë˜ ë¶€ë¶„ì„ ë‹¤ì‹œ ì…ë ¥í•´ì¤€ë‹¤.
ì´ ê³¼ì •ì„ ê±°ì¹˜ê³  ë‚˜ë©´ ìƒˆë¡œ ìƒì„±í•œ `DB`ì— `SQL` íŒŒì¼ì´ ë¶™ì—¬ë„£ì–´ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

### ì˜¤ë¥˜ ë°œìƒ ì´ìœ 

```javascript
// 18ë²ˆ ì¤„
SET @@SESSION.SQL_LOG_BIN= 0;

//24ë²ˆ ì¤„
SET @@GLOBAL.GTID_PURGED=/*!80000 '+'*/ '';

//352ë²ˆ ì¤„
SET @@SESSION.SQL_LOG_BIN = @MYSQLDUMP_TEMP_LOG_BIN;
```

ë°”ì´ë„ˆë¦¬ ë¡œê¹…ì„ ë¹„í™œì„±í™”í•˜ê±°ë‚˜ í™œì„±í™”í•˜ëŠ”ë° íŠ¹ì • ê´€ë¦¬ ê¶Œí•œì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì´ë‹¤(ë°”ì´ë„ˆë¦¬ ë¡œê¹… -  `MySQL` ì˜ ê¸°ëŠ¥ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ë³€ê²½ ì‚¬í•­ì„ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ íŒŒì¼ì— ê¸°ë¡). `AWS RDS` ë° ê¸°íƒ€ ê´€ë¦¬í˜• ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì´ëŸ¬í•œ ê´€ë¦¬ ê¶Œí•œì´ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ìì—ê²Œ ë¶€ì—¬ë˜ì§€ ì•ŠëŠ”ë‹¤. ì™œëƒí•˜ë©´ ë™ì¼í•œ ì„œë²„ì˜ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
`dump`ëŠ” ìƒˆ ë°ì´í„°ë² ì´ìŠ¤ì— ê°€ì ¸ì˜¬ ë•Œ ë³µì œë‚˜ ë³µêµ¬ê°€ ìˆ˜í–‰ë˜ì§€ ì•Šìœ¼ë©° ë°”ì´ë„ˆë¦¬ ë¡œê¹…ì„ ë¹„í™œì„±í™”í•  í•„ìš”ê°€ ì—†ë‹¤.
ë³´í†µ ë°ì´í„° ë¬´ê²°ì„±ì„ ìœ ì§€í•˜ëŠ”ë° ì¤‘ìš”í•´ì„œ ë¹„í™œì„±í™”í•˜ë ¤ëŠ” ê²½ìš°ëŠ” ë³„ë¡œ ì—†ë‹¤.
18, 24, 352ë²ˆì§¸ ì¤„ì€ íŠ¹ì • ë³€ê²½ ì‚¬í•­ì´ ë³µì œë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê±°ë‚˜ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ë¥¼ ì‘ì„±í•˜ë©´ ì˜¤ë²„í—¤ë“œê°€ ì¶”ê°€ë  ìˆ˜ ìˆì–´ì„œ ê·œëª¨ê°€ í° ë°ì´í„° ë³€ê²½ ì†ë„ë¥¼ ë†’ì´ê¸° ìœ„í•´ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.
ë³´í†µì€ ë³µì œ ë˜ëŠ” ë³µêµ¬ì— ì´ì§„ ë¡œê¹…ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤ê³  í™•ì‹ í•˜ì§€ ì•ŠëŠ” í•œ ì´ì§„ ë¡œê¹…ì„ ë¹„í™œì„±í™”í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  í•˜ëŠ”ë° í…ŒìŠ¤íŠ¸ ì½”ë“œìš©ìœ¼ë¡œë§Œ ì“°ëŠ” ê²ƒì´ë¼ë©´ ê´œì°®ì•„ ë³´ì¸ë‹¤.
ë”°ë¼ì„œ 18, 24, 352ë²ˆì§¸ ì¤„ì„ ì‚­ì œí•˜ê±°ë‚˜ ì£¼ì„ ì²˜ë¦¬ë¥¼ í•˜ë©´ ëœë‹¤.




<br>

